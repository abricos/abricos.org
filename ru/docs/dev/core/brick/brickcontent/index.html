<!--[*]
[tt=content][/tt]

[mod=sitemap]regmenuitem|title=Стартовый кирпич,buildmetavars[/mod]

[*]-->
<h4>BrickContent - стартовый кирич</h4>
<p>
	Сборка ответа сервера на запрос клиента в платформе Абрикос начинается 
	со стартового кирпича.
</p>
<p>
	Стартовые кирпичи в платформе Абрикос поставляются с модулем, которые 
	находятся в папке <i>content</i> этого модуля:
</p>
<pre class="prettyprint">
<code class="html">/modules/[имя модуля]/content/[имя стартового кирпича].html</code>
</pre>
<p>
	Перегрузка стартового кирпича осуществляется в поставляемом шаблоне:
</p>
<pre class="prettyprint">
<code class="html">/tt/[имя шаблона]/override/[имя модуля]/content/[имя стартового кирпича].html</code>
</pre>

<h5>Параметры кирпича</h5>
<p>
	В стартвовом кирпиче обязательным параметром является информация о кирпиче-обертке
</p>

<pre class="prettyprint"><code class="html">
 &lt;!--[*]
 ...
 [tt=кирпич_обертка]имя_шаблона[/tt]
 ...
 [*]--&gt;
 ...
 
</code></pre>
<p>
	где, <br />
	<i>кирпич_обертка</i> - имя <a href="../bricktemplate/">кирпича-обертки</a>, в который 
	будет вставлен результа сборки стартового кирпича; <br />
	<i>имя_шаблона</i> (опционально) - имя шаблона, в котором находится кирпич-обертка. 
	Если имя шаблона не указано, то будет использован шаблон, установленный в настройках 
	платформы.
</p>

<h5>Процесс сборки страницы сервера</h5>
<p>
	Поступивший запрос клиента обрабатывается ядром платформы, определяя, какой
	модуль будет собирать ответ. Такой модуль в платформе Абрикос называется - 
	«Управляющий модуль».
</p>
<p>
	Управляющий модуль парсит URL и определяет, какой стартовый кирпич
	начнет сборку страницы.
</p>
<p>
	Если управляющий модуль не смог определить стартовый кирпич, он возвращает
	пустое имя стартового кирпича, что дает указание ядру вернуть 404-ю ошибку.
</p>
<p>
	После того, как управляющий модуль вернул ядру имя стартового кирпича, ядро начинает 
	сборку страницы - ответ сервера. 
</p>
<p>
	Ядро, парсит стартовый кирпич, определяя, в какой 
	<a href="../bricktemplate/">кирпич-обертку</a> (шаблон) будет
	вставлен результат сборки стартового кирпича. Поэтому, обязательным условием
	при описании стартового кирпича, является наличие информации о кирпиче-обертке.
</p>
<p>
	Далее, ядро платформы рекурсивно собирает информацию о всех 
	<a href="../brick/">свободных кирпичах</a>, которые будут участвовать в 
	сборке страницы-ответа.
</p>
<p>
	После того, как вся структура будущей страницы построена, ядро начинает процесс самой
	сборки (строительство).
</p>
<p>
	Строительство будущей страницы начинается с самых крайних кирпичей, занося 
	результат в кирпич родителя.
</p>
<p>
	В итоге, когда кирпич-обертка и стартовый кирпич обработают все вложенные свободные-кирпичи,
	результат стартого кирпича будет вставлен в кирпич-обертку, после чего ядро платформы 
	отдаст эту страницу клиенту.
</p>
<p>
	Чтобы проще понять этот процесс, достаточно представить строительство дома, в 
	котором каждый элемент является самостоятельным, но в процессе возведении 
	самого дома, становиться его материалом. Ядро платформы при этом выступает 
	в роли завода по производству строительного материала. А сам компилятор страницы
	выступает в роли прораба, который по заданной схеме возводит дом.
</p>

